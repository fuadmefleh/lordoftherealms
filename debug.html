<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Lord of the Realms</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a1a;
            color: #00ff00;
        }

        .error {
            color: #ff0000;
        }

        .success {
            color: #00ff00;
        }
    </style>
</head>

<body>
    <h1>Lord of the Realms - Debug Page</h1>
    <div id="status">Loading scripts...</div>
    <div id="log"></div>

    <script>
        const log = document.getElementById('log');
        const status = document.getElementById('status');

        function addLog(msg, isError = false) {
            const div = document.createElement('div');
            div.className = isError ? 'error' : 'success';
            div.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
            log.appendChild(div);
            console.log(msg);
        }

        addLog('Debug page loaded');

        // Test each script individually
        const scripts = [
            'js/utils.js',
            'js/hex.js',
            'js/terrain.js',
            'js/kingdom.js',
            'js/world.js',
            'js/player.js',
            'js/camera.js',
            'js/renderer.js',
            'js/ui.js',
            'js/minimap.js',
            'js/game.js'
        ];

        let loadedCount = 0;

        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    addLog(`✓ Loaded: ${src}`);
                    resolve();
                };
                script.onerror = (e) => {
                    addLog(`✗ FAILED: ${src} - ${e.message || 'Unknown error'}`, true);
                    reject(e);
                };
                document.body.appendChild(script);
            });
        }

        async function loadAllScripts() {
            try {
                for (const src of scripts) {
                    await loadScript(src);
                    loadedCount++;
                }
                status.textContent = `All ${loadedCount} scripts loaded successfully!`;
                status.className = 'success';
                addLog('All scripts loaded! Checking for errors...');

                // Try to create a game instance
                addLog('Creating Game instance...');
                const game = new Game();
                addLog('✓ Game instance created successfully!');
                addLog('Ready to start! Go to index.html and click New Game');

            } catch (error) {
                status.textContent = `Error loading scripts: ${error.message}`;
                status.className = 'error';
                addLog(`FATAL ERROR: ${error.message}`, true);
                addLog(`Stack: ${error.stack}`, true);
            }
        }

        loadAllScripts();
    </script>
</body>

</html>